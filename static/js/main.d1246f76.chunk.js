(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,a){},144:function(e,t,a){},146:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},152:function(e,t,a){},154:function(e,t,a){},156:function(e,t,a){},158:function(e,t,a){},160:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(68),c=a.n(r),i=(a(79),a(4)),s=a(5),l=a(8),u=a(6),m=a(7),d=a(3),p="SIGNIN",h="SIGNOUT",f="SIGNINGIN",b="SIGNINFAILED",v="NEWUSER",E="REGISTERING",g="REGISTER",y="OLDUSER",N="FETCHING_ROOMS",j="UPDATE_ROOMS",O="SELECT_CHAT_ROOM",A="UNSELECT_CHAT_ROOM",w="FETCHING_INVITES",R="GET_INVITES",C="DELETE_INVITE",U="CLEAN_CHAT_REDUCER",k="DELETE_USER",S="UPDATE_MESSAGES",I=a(11),D=a.n(I).a.initializeApp({apiKey:"AIzaSyCyFwexoUngNo92rHXrDZPhctCY6vmFkik",authDomain:"reactchat-7902e.firebaseapp.com",databaseURL:"https://reactchat-7902e.firebaseio.com",projectId:"reactchat-7902e",storageBucket:"reactchat-7902e.appspot.com",messagingSenderId:"479296809558"});a(140);var F=a(1),G=a(54),M=a.n(G),x=a(70);function K(e){return function(t){t({type:O,payload:e})}}function L(){return function(e){return e({type:w,payload:null}),D.firestore().collection("invites").doc(D.auth().currentUser.email).onSnapshot(function(t){if(null!=t.data()){var a=t.data().rooms?t.data().rooms:null;if(a){var n=[];a.forEach(function(){var t=Object(x.a)(M.a.mark(function t(a){return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.firestore().collection("chatrooms").doc(a).get().then(function(t){n.push(t.data()),e({type:R,payload:t.data()})});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}else e({type:R,payload:null})}else e({type:R,payload:null})})}}a(144),a(146);var H=a(71),P=a.n(H),z=a(72),B=a.n(z),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={showInput:!1,newRoomName:""},a.showRoomInput=a.showRoomInput.bind(Object(F.a)(Object(F.a)(a))),a.hideRoomInput=a.hideRoomInput.bind(Object(F.a)(Object(F.a)(a))),a.createChatRoom=a.createChatRoom.bind(Object(F.a)(Object(F.a)(a))),a.updateNewRoomName=a.updateNewRoomName.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"showRoomInput",value:function(){this.setState({showInput:!0})}},{key:"hideRoomInput",value:function(){this.setState({showInput:!1,newRoomName:""})}},{key:"updateNewRoomName",value:function(e){this.setState({newRoomName:e.target.value})}},{key:"createChatRoom",value:function(){""!==this.state.newRoomName.trim()&&function(e){D.firestore().collection("chatrooms").add({roomName:e,owner:D.auth().currentUser.uid,ownerName:D.auth().currentUser.displayName,created_at:new Date}).then(function(e){var t=e.id,a=D.auth().currentUser;D.firestore().collection("users").doc(a.uid).update({chatrooms:I.firestore.FieldValue.arrayUnion(t)}),D.firestore().collection("chatrooms").doc(t).update({id:t}),D.firestore().collection("chatrooms").doc(t).update({members:I.firestore.FieldValue.arrayUnion({name:a.displayName,id:a.uid,photoURL:a.photoURL})})}).catch(function(e){console.error(e)})}(this.state.newRoomName),this.setState({showInput:!1,newRoomName:""})}},{key:"render",value:function(){return o.a.createElement("div",{className:"row "},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"row create_room_button_container"},o.a.createElement("button",{className:"show_room_input",onClick:this.showRoomInput},"Create a New Room")),this.state.showInput?o.a.createElement("div",{className:"row create_room_input_container"},o.a.createElement("div",{className:"col-8"},o.a.createElement("input",{type:"text",className:"room_name",autoComplete:"off",placeholder:"enter a name for the chat room",name:"chat_room",value:this.state.newRoomName,onChange:this.updateNewRoomName})),o.a.createElement("div",{className:"col-1 cancel_button_container"},o.a.createElement("img",{className:"cancel_creation",onClick:this.hideRoomInput,src:P.a,alt:"cancel"})),o.a.createElement("div",{className:"col-1 offset-1 create_button_container"},o.a.createElement("img",{className:"creat_room",onClick:this.createChatRoom,src:B.a,alt:"create"}))):null))}}]),t}(n.Component);var Q=Object(d.b)(function(e){return{}},{})(V),J=(a(148),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).acceptInvite=a.acceptInvite.bind(Object(F.a)(Object(F.a)(a))),a.rejectInvite=a.rejectInvite.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"acceptInvite",value:function(e){!function(e){var t=D.auth().currentUser;D.firestore().collection("users").doc(t.uid).update({chatrooms:I.firestore.FieldValue.arrayUnion(e)}),D.firestore().collection("chatrooms").doc(e).update({members:I.firestore.FieldValue.arrayUnion({name:t.displayName,id:t.uid,photoURL:t.photoURL})})}(e.target.id),this.props.deleteInvite(e.target.id)}},{key:"rejectInvite",value:function(e){this.props.deleteInvite(e.target.id)}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"row invites_box"},o.a.createElement("p",null,"Pending Invites"),o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"row joined_rooms_container"},o.a.createElement("div",{className:"col-12"},null!=this.props.irooms?this.props.irooms.length>0?this.props.irooms.map(function(t){return o.a.createElement("div",{className:"row invite_room",key:t.created_at},o.a.createElement("div",{className:"col-9"},"You have an invite to room '",t.roomName,"' from '",t.ownerName,"'"),o.a.createElement("div",{className:"col-3"},o.a.createElement("div",{className:"row"},o.a.createElement("button",{className:"accept_invite",id:t.id,onClick:e.acceptInvite},"Accept")),o.a.createElement("div",{className:"row"},o.a.createElement("button",{className:"reject_invite",id:t.id,onClick:e.rejectInvite},"Reject"))))}):o.a.createElement("p",null,"No Invites!"):o.a.createElement("p",null," No Invites!")))))}}]),t}(n.Component));var W=Object(d.b)(function(e){return{irooms:e.chatList.invitedRooms}},{selectChatRoom:K,deleteInvite:function(e){return function(t){!function(e){D.firestore().collection("invites").doc(D.auth().currentUser.email).update({rooms:I.firestore.FieldValue.arrayRemove(e)}).then(function(){L()})}(e),t({type:C,payload:e})}}})(J),X=(a(150),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={selected:null},a.selectChatroom=a.selectChatroom.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"selectChatroom",value:function(e){this.props.fetchMessages(e.target.id,!0),this.props.selectChatRoom(e.target.id),this.setState({selected:e.target.id})}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"row room_list_joined"},o.a.createElement("p",null,"Joined Chat Rooms"),o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"row joined_rooms_container"},o.a.createElement("div",{className:"col-12"},null!=this.props.rooms?this.props.rooms.length>0?this.props.rooms.map(function(t){return o.a.createElement("div",{className:"row room  ".concat(e.state.selected===t.id?"selected_room":""),key:t.created_at},o.a.createElement("div",{className:"col-8"},t.roomName),o.a.createElement("div",{className:"col-4 no-padding"},o.a.createElement("button",{className:"select_room ",id:t.id,onClick:e.selectChatroom},e.state.selected===t.id?"Active->":"Enter")))}):o.a.createElement("p",null,"No Joined Rooms"):o.a.createElement("p",null,"No rooms")))))}}]),t}(n.Component));var T=Object(d.b)(function(e){return{rooms:e.chatList.chatRooms}},{selectChatRoom:K,fetchMessages:function(e,t){return function(t){return t({type:S,payload:null}),D.firestore().collection("chatrooms").doc(e).collection("messages").orderBy("created_at","desc").limit(10).onSnapshot(function(e){var a=[];e.forEach(function(e){var t={id:e.id,message:e.data().message,sender:e.data().sender,sender_id:e.data().sender_id,created_at:e.data().created_at.toDate()};a.push(t)}),t({type:S,payload:a})},function(e){})}}})(X),Y=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"row chat_list_container"},o.a.createElement("div",{className:"col-12"},o.a.createElement(Q,null),o.a.createElement(W,null),o.a.createElement(T,null)))}}]),t}(n.Component);var Z=Object(d.b)(function(e){return{}},{})(Y),_=(a(152),a(154),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={text:"",hendlerSet:!1},a.typing=a.typing.bind(Object(F.a)(Object(F.a)(a))),a.send=a.send.bind(Object(F.a)(Object(F.a)(a))),a.findUserImage=a.findUserImage.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"typing",value:function(e){var t=this;(this.setState({text:e.target.value}),this.state.handlerSet)||(this.setState({handlerSet:!0}),document.getElementById("chat_text").addEventListener("keyup",function(e){e.preventDefault(),13===e.keyCode&&t.send()}))}},{key:"componentWillUnmount",value:function(){}},{key:"send",value:function(){document.getElementById("chat_text").focus(),""!==this.state.text.trim()&&function(e,t){D.firestore().collection("chatrooms").doc(e).collection("messages").add({sender:D.auth().currentUser.displayName,sender_id:D.auth().currentUser.uid,message:t,created_at:new Date})}(this.props.selectedRoom.id,this.state.text),this.setState({text:""})}},{key:"componentDidUpdate",value:function(){var e=document.getElementById("message_top_level_container");e&&(e.scrollTop=e.scrollHeight)}},{key:"findUserImage",value:function(e){return this.props.selectedRoom.members.find(function(t){return t.id===e}).photoURL}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"row chat_list_container"},null!=this.props.selectedRoom?o.a.createElement("div",{className:"col-12 sub_container"},o.a.createElement("div",{className:"row room_title"},o.a.createElement("p",null,null!=this.props.selectedRoom?this.props.selectedRoom.roomName:"")),o.a.createElement("div",{className:"row message_top_level_container",id:"message_top_level_container"},o.a.createElement("div",{className:"message_container"},null!=this.props.messages?this.props.messages.map(function(t){return t.sender_id===e.props.user.uid?o.a.createElement("div",{className:"message  me",key:t.id},t.message," ",o.a.createElement("img",{src:e.findUserImage(t.sender_id),alt:""})):o.a.createElement("div",{className:"message ",key:t.created_at},o.a.createElement("img",{src:e.findUserImage(t.sender_id),alt:""}),o.a.createElement("span",null,t.sender," : "),t.message)}):null)),o.a.createElement("div",{className:"input_box"},o.a.createElement("input",{type:"text",name:"chat_text",className:"chat_text",id:"chat_text",onChange:this.typing,value:this.state.text}),o.a.createElement("button",{className:"send_message",onClick:this.send},"SEND"))):o.a.createElement("div",{className:"col-12 no_room_selected"},"Please select a chat room to join the conversation"))}}]),t}(n.Component));var q=Object(d.b)(function(e){return{selectedRoom:e.chatList.currentlySelectedRoom,user:e.auth.user,messages:e.chatList.messageCache}},{})(_),$=a(37),ee=(a(156),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={emailInvite:""},a.emailChange=a.emailChange.bind(Object(F.a)(Object(F.a)(a))),a.memberAdd=a.memberAdd.bind(Object(F.a)(Object(F.a)(a))),a.kickUser=a.kickUser.bind(Object(F.a)(Object(F.a)(a))),a.deleteRoom=a.deleteRoom.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"emailChange",value:function(e){this.setState({emailInvite:e.target.value})}},{key:"memberAdd",value:function(){var e,t;e=this.state.emailInvite,t=this.props.selectedRoom.id,D.firestore().collection("invites").doc(e).set({rooms:I.firestore.FieldValue.arrayUnion(t)},{merge:!0})}},{key:"kickUser",value:function(e){this.props.kickUserFromChat(this.props.selectedRoom.id,e.target.id)}},{key:"deleteRoom",value:function(){var e;this.props.unselectChatRoom(),(e=this.props.selectedRoom).members.forEach(function(t){D.firestore().collection("users").doc(t.id).update({chatrooms:I.firestore.FieldValue.arrayRemove(e.id)})}),D.firestore().collection("chatrooms").doc(e.id).delete()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"row chat_list_container"},null!=this.props.selectedRoom?o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"row chat_room_title"},o.a.createElement("p",null," ",this.props.selectedRoom.roomName)),o.a.createElement("div",{className:"row owner_details"},o.a.createElement("p",null,"Owner : ",this.props.selectedRoom.ownerName)),this.props.selectedRoom.owner===this.props.user.uid?o.a.createElement("div",{className:"row delete_details"},o.a.createElement("div",{className:"col-12 delete_room"},o.a.createElement("button",{className:"delete_chat_button",onClick:this.deleteRoom},"Delete this Room"))):"",o.a.createElement("div",{className:"row created_details"},o.a.createElement("p",null,"created on"),o.a.createElement("p",null,new Date(this.props.selectedRoom.created_at.toDate()).toLocaleString())),this.props.selectedRoom.owner===this.props.user.uid?o.a.createElement("div",{className:"row add_user_to_room"},o.a.createElement("p",null," Add a user to chatroom: "),o.a.createElement("div",{className:"newuser_email"},o.a.createElement("input",{type:"email",name:"email",className:"invite_email_name",placeholder:"enter email of invitee",onChange:this.emailChange,value:this.state.emailInvite}),o.a.createElement("button",{className:"invite_send",onClick:this.memberAdd},"Send Invite "))):"",o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 members_containers"},o.a.createElement("p",null,"Members of chat"),Object($.a)(this.props.selectedRoom.members).map(function(t,a){return o.a.createElement("div",{className:"row member_item",key:t.id},o.a.createElement("div",{className:"col-7"},o.a.createElement("p",{className:"member_name"},o.a.createElement("img",{src:t.photoURL,alt:""}),t.name)),o.a.createElement("div",{className:"col-5"},t.id===e.props.selectedRoom.owner?"OWNER":e.props.user.uid===e.props.selectedRoom.owner?o.a.createElement("button",{id:t.id,className:"remove_member",onClick:e.kickUser},"Kick"):""))})))):"")}}]),t}(n.Component));var te=Object(d.b)(function(e){return{selectedRoom:e.chatList.currentlySelectedRoom,rooms:e.chatList.chatRooms,user:e.auth.user}},{kickUserFromChat:function(e,t){return function(a){!function(e,t){D.firestore().collection("chatrooms").doc(e).get().then(function(a){var n=a.data();D.firestore().collection("chatrooms").doc(e).update({members:n.members.filter(function(e){return e.id!==t})}),D.firestore().collection("users").doc(t).update({chatrooms:I.firestore.FieldValue.arrayRemove(e)})})}(e,t),a({type:k,payload:null})}},unselectChatRoom:function(){return function(e){e({type:A,payload:null})}}})(ee),ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).logout=a.logout.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.props.fetchRooms(),e.props.getInvites()},2e3)}},{key:"componentDidUpdate",value:function(){this.props.fetchRooms(),this.props.getInvites()}},{key:"componentWillUnmount",value:function(){this.props.cleanStateOnleaveHome()}},{key:"render",value:function(){return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"title_bar_container"},o.a.createElement("img",{className:"profilepic",src:this.props.user.photoURL,alt:"profile"}),o.a.createElement("div",{className:"title"},o.a.createElement("p",null,"Welcome to Nik CHat ,  ",this.props.user.displayName,"  ")),o.a.createElement("button",{className:"logout_button btn",onClick:this.logout},"Logout "))),o.a.createElement("div",{className:"row components"},o.a.createElement("div",{className:"col-4"},o.a.createElement(Z,null)),o.a.createElement("div",{className:"col-5"},o.a.createElement(q,null)),o.a.createElement("div",{className:"col-3"},o.a.createElement(te,null))))}},{key:"logout",value:function(){this.props.logout()}}]),t}(n.Component);var ne=Object(d.b)(function(e){return{user:e.auth.user}},{logout:function(){return function(e){return D.auth().signOut().then(function(t){e({type:h,payload:null})})}},fetchRooms:function(){return function(e){return e({type:N,payload:null}),D.firestore().collection("users").doc(D.auth().currentUser.uid).onSnapshot(function(t){var a=t.data().chatrooms?t.data().chatrooms:null;if(a){var n=[];a.forEach(function(e){n.push(new Promise(function(t,a){D.firestore().collection("chatrooms").doc(e).get().then(function(e){t(e.data())})}))}),Promise.all(n).then(function(t){e({type:j,payload:t})}),e({type:j,payload:[]})}else e({type:j,payload:null})})}},getInvites:L,cleanStateOnleaveHome:function(){return function(e){e({type:U,payload:null})}}})(ae),oe=a(25),re=(a(158),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:""},a.onChange=a.onChange.bind(Object(F.a)(Object(F.a)(a))),a.onSubmit=a.onSubmit.bind(Object(F.a)(Object(F.a)(a))),a.newUser=a.newUser.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){e.preventDefault(),this.setState(Object(oe.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.login(this.state.email,this.state.password)}},{key:"newUser",value:function(){this.props.newUser()}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"signin_container"},o.a.createElement("div",{className:"signindiv"},null!==this.props.failed?o.a.createElement("p",{className:"failed_status"},this.props.failed.message):"",o.a.createElement("p",null,"Sign in  "),o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("div",{className:"email_box box"},o.a.createElement("label",null,"Email: "),o.a.createElement("input",{type:"email",name:"email",autoComplete:"off",required:!0,minLength:"6",onChange:this.onChange,value:this.state.email})),o.a.createElement("div",{className:"password_box box"},o.a.createElement("label",null,"Password: "),o.a.createElement("input",{type:"password",name:"password",autoComplete:"off",required:!0,pattern:"[A-Za-z0-9]{6,15}",onChange:this.onChange,value:this.state.password})),o.a.createElement("br",null),o.a.createElement("button",{type:"submit"},"Login")),o.a.createElement("p",{className:"new_user"},"New User? ",o.a.createElement("button",{onClick:this.newUser},"Sign Up"))))}}]),t}(n.Component));var ce=Object(d.b)(function(e){return{failed:e.auth.failed}},{login:function(e,t){return function(a){return a({type:f,payload:null}),D.auth().signInWithEmailAndPassword(e,t).then(function(e){var t=e.user;a({type:p,payload:t})}).catch(function(e){a({type:b,payload:e})})}},newUser:function(){return function(e){e({type:v,payload:null})}}})(re),ie=(a(160),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",name:"",selectedFile:null,loaded:0},a.state={email:"",password:"",name:"",selectedFile:null},a.onChange=a.onChange.bind(Object(F.a)(Object(F.a)(a))),a.onSubmit=a.onSubmit.bind(Object(F.a)(Object(F.a)(a))),a.onChangeFile=a.onChangeFile.bind(Object(F.a)(Object(F.a)(a))),a.goback=a.goback.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"goback",value:function(){this.props.oldUser()}},{key:"onChangeFile",value:function(e){this.setState({selectedFile:e.target.files[0],loaded:0})}},{key:"onChange",value:function(e){e.preventDefault(),this.setState(Object(oe.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.registerUser(this.state.email,this.state.password,this.state.name,this.state.selectedFile)}},{key:"render",value:function(){return o.a.createElement("div",{className:"signin_container"},o.a.createElement("div",{className:"signindiv"},o.a.createElement("p",null,"Register  "),o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("div",{className:"name_box box"},o.a.createElement("label",null,"Name "),o.a.createElement("input",{type:"text",name:"name",required:!0,onChange:this.onChange,value:this.state.name})),o.a.createElement("div",{className:"email_box box"},o.a.createElement("label",null,"Email "),o.a.createElement("input",{type:"email",name:"email",required:!0,onChange:this.onChange,value:this.state.email})),o.a.createElement("div",{className:"password_box box"},o.a.createElement("label",null,"Password "),o.a.createElement("input",{type:"password",name:"password",required:!0,onChange:this.onChange,value:this.state.password})),o.a.createElement("div",{className:"profile_box box"},o.a.createElement("label",null,"Profile Pic "),o.a.createElement("input",{type:"file",name:"profilePic",required:!0,accept:"image/*",onChange:this.onChangeFile})),o.a.createElement("br",null),o.a.createElement("button",{type:"submit"},"Register"),o.a.createElement("br",null),o.a.createElement("button",{className:"backtologin",onClick:this.goback},"Back to Login"))))}}]),t}(n.Component)),se=Object(d.b)(null,{registerUser:function(e,t,a,n){return function(o){return o({type:E,payload:null}),D.auth().createUserWithEmailAndPassword(e,t).then(function(e){var t=D.storage().ref(e.user.uid);t.put(n).then(function(n){t.getDownloadURL().then(function(t){e.user.updateProfile({displayName:a,photoURL:t}).then(function(){var t=D.auth().currentUser,a=t.displayName,n=t.photoURL,r=t.email,c=t.uid;D.firestore().collection("users").doc(c).set({name:a,email:r,photoURL:n,uid:c,created_at:new Date,chatrooms:[]}).then(function(e){}).catch(function(e){}),o({type:g,payload:e.user})}).catch(function(e){})})}).catch(function(e){})}).catch(function(e){})}},oldUser:function(){return function(e){e({type:y,payload:null})}}})(ie),le=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,this.props.newuser?o.a.createElement(se,null):o.a.createElement(ce,null))}}]),t}(n.Component);var ue=Object(d.b)(function(e){return{newuser:e.auth.newUser}},{})(le),me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).authListener(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"authListener",value:function(){var e=this;D.auth().onAuthStateChanged(function(t){t?e.props.silentLogin(t):e.props.silentLogin(null)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},this.props.loggedin?o.a.createElement(ne,null):o.a.createElement(ue,null))}}]),t}(n.Component);var de=Object(d.b)(function(e){return{loggedin:e.auth.loggedin}},{silentLogin:function(e){return function(t){t(null==e?{type:h,payload:null}:{type:p,payload:e})}}})(me);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(20),he=a(73),fe=(a(162),a(9)),be={loggedin:!1,user:{},newUser:!1,failed:null},ve={chatRooms:[],currentlySelectedRoom:null,invitedRooms:[],messageCache:null},Ee=Object(pe.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(fe.a)({},e,{loggedin:!0,user:t.payload,newUser:!1,failed:null});case h:return Object(fe.a)({},e,{newUser:!1,user:null,loggedin:!1});case y:return Object(fe.a)({},e,{newUser:!1});case f:return Object(fe.a)({},e,{user:null,failed:null});case b:return Object(fe.a)({},e,{failed:t.payload});case v:return Object(fe.a)({},e,{newUser:!0});case g:return Object(fe.a)({},e,{user:t.payload,loggedin:!0});case E:return Object(fe.a)({},e);default:return e}},chatList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(fe.a)({},e,{chatRooms:[],currentlySelectedRoom:null,invitedRooms:[],messageCache:[]});case N:return Object(fe.a)({},e);case j:return null===t.payload?e:Object(fe.a)({},e,{chatRooms:t.payload});case A:return Object(fe.a)({},e,{currentlySelectedRoom:null,messageCache:null});case O:return Object(fe.a)({},e,{currentlySelectedRoom:e.chatRooms.find(function(e){return e.id===t.payload}),messageCache:null});case S:return Object(fe.a)({},e,{messageCache:t.payload});case w:return e;case R:return null===t.payload?e:-1===e.invitedRooms.findIndex(function(e){return e.id===t.payload.id})?Object(fe.a)({},e,{invitedRooms:[].concat(Object($.a)(e.invitedRooms),[t.payload])}):e;case C:var a=e.invitedRooms.filter(function(e){return e.id!==t.payload});return Object(fe.a)({},e,{invitedRooms:a});default:return e}}}),ge=[he.a],ye=Object(pe.d)(Ee,{},pe.a.apply(void 0,ge));a(163);c.a.render(o.a.createElement(d.a,{store:ye},o.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t){e.exports="data:image/png;base64,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"},72:function(e,t){e.exports="data:image/png;base64,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"},74:function(e,t,a){e.exports=a(165)},79:function(e,t,a){}},[[74,2,1]]]);
//# sourceMappingURL=main.d1246f76.chunk.js.map